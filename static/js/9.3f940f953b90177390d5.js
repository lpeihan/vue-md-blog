webpackJsonp([9],{"8BV5":function(s,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=t("UJa6"),v=t("18Nq"),_=Object(v.a)(null,l.a,l.b,!1,null,null,null);a.default=_.exports},UJa6:function(s,a,t){"use strict";t.d(a,"a",function(){return l}),t.d(a,"b",function(){return v});var l=function(){var s=this,a=s.$createElement;s._self._c;return s._m(0)},v=[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("p",[s._v("{"),t("br"),s._v("  “title”: “神奇的Object.defineProperty”,"),t("br"),s._v("  “date”: “2018-05-17”,"),t("br"),s._v("  “tags”: “javascript”"),t("br"),s._v("}")]),s._v(" "),t("p",[t("code",[s._v("vue.js")]),s._v("是通过"),t("code",[s._v("defineProperty")]),s._v("实现双向绑定的。")]),s._v(" "),t("p",[s._v("简单使用：")]),s._v(" "),t("pre",[t("code",{staticClass:"lang-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" a = {};\n"),t("span",{staticClass:"hljs-built_in"},[s._v("Object")]),s._v(".defineProperty(a, "),t("span",{staticClass:"hljs-string"},[s._v("'b'")]),s._v(", {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("value")]),s._v(":"),t("span",{staticClass:"hljs-number"},[s._v("123")]),s._v("\n});\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(a.b);  "),t("span",{staticClass:"hljs-comment"},[s._v("//123")]),s._v("\n")])]),s._v(" "),t("p",[s._v("它接受三个参数，而且都是必填的。")]),s._v(" "),t("h4",{attrs:{id:"-"}},[s._v("传入参数")]),s._v(" "),t("ul",[t("li",[s._v("第一个参数：目标对象")]),s._v(" "),t("li",[s._v("第二个参数：需要定义的属性或方法的名字。")]),s._v(" "),t("li",[s._v("第三个参数：目标属性所拥有的特性"),t("code",[s._v("descriptor")]),s._v(" 。")])]),s._v(" "),t("h4",{attrs:{id:"descriptor"}},[s._v("descriptor")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("value")])]),s._v(" "),t("li",[t("code",[s._v("writable")]),s._v("：属性的值是否能被重写")]),s._v(" "),t("li",[t("code",[s._v("configurable")]),s._v("：一旦为false，就不能再设置"),t("code",[s._v("value")]),s._v("，"),t("code",[s._v("writable")]),s._v("，"),t("code",[s._v("configurable")])]),s._v(" "),t("li",[t("code",[s._v("enumerable")]),s._v("：是否能在"),t("code",[s._v("for...in")]),s._v("循环中遍历出来或在"),t("code",[s._v("Object.keys")]),s._v("中列举出来")]),s._v(" "),t("li",[t("code",[s._v("get")])]),s._v(" "),t("li",[t("code",[s._v("set")])])]),s._v(" "),t("p",[s._v("再来看第一个例子：")]),s._v(" "),t("pre",[t("code",{staticClass:"lang-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" a = {};\n"),t("span",{staticClass:"hljs-built_in"},[s._v("Object")]),s._v(".defineProperty(a, "),t("span",{staticClass:"hljs-string"},[s._v("'b'")]),s._v(", {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("value")]),s._v(":"),t("span",{staticClass:"hljs-number"},[s._v("123")]),s._v("\n});\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(a.b);  "),t("span",{staticClass:"hljs-comment"},[s._v("//123")]),s._v("\n")])]),s._v(" "),t("p",[s._v("和下面等价")]),s._v(" "),t("pre",[t("code",{staticClass:"lang-javascript"},[t("span",{staticClass:"hljs-string"},[s._v("const")]),s._v(" "),t("span",{staticClass:"hljs-string"},[s._v("a")]),s._v(" "),t("span",{staticClass:"hljs-string"},[s._v("=")]),s._v(" "),t("span",{staticClass:"hljs-string"},[s._v("{}")]),s._v("\n"),t("span",{staticClass:"hljs-string"},[s._v("Object.defineProperty(a,")]),s._v(" "),t("span",{staticClass:"hljs-string"},[s._v("'b'")]),t("span",{staticClass:"hljs-string"},[s._v(",")]),s._v(" "),t("span",{staticClass:"hljs-string"},[s._v("{")]),s._v("\n"),t("span",{staticClass:"hljs-attr"},[s._v("  value:")]),s._v(" "),t("span",{staticClass:"hljs-number"},[s._v("123")]),t("span",{staticClass:"hljs-string"},[s._v(",")]),s._v("\n"),t("span",{staticClass:"hljs-attr"},[s._v("  writable:")]),s._v(" "),t("span",{staticClass:"hljs-literal"},[s._v("false")]),t("span",{staticClass:"hljs-string"},[s._v(",")]),s._v("\n"),t("span",{staticClass:"hljs-attr"},[s._v("  enumerable:")]),s._v(" "),t("span",{staticClass:"hljs-literal"},[s._v("false")]),t("span",{staticClass:"hljs-string"},[s._v(",")]),s._v("\n"),t("span",{staticClass:"hljs-attr"},[s._v("  configurable:")]),s._v(" "),t("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v("\n"),t("span",{staticClass:"hljs-string"},[s._v("});")]),s._v("\n"),t("span",{staticClass:"hljs-string"},[s._v("console.log(a.b);//123")]),s._v("\n")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("writable")])])]),s._v(" "),t("pre",[t("code",{staticClass:"lang-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" a = {}; \n"),t("span",{staticClass:"hljs-built_in"},[s._v("Object")]),s._v(".defineProperty(a, "),t("span",{staticClass:"hljs-string"},[s._v('"b"')]),s._v(", { \n    "),t("span",{staticClass:"hljs-attr"},[s._v("value")]),s._v(": "),t("span",{staticClass:"hljs-number"},[s._v("123")]),s._v(",\n    "),t("span",{staticClass:"hljs-attr"},[s._v("writable")]),s._v(": "),t("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v("\n});\n"),t("p",[t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(a.b); "),t("span",{staticClass:"hljs-comment"},[s._v("// 打印 123")]),s._v("\na.b = "),t("span",{staticClass:"hljs-number"},[s._v("25")]),s._v("; "),t("span",{staticClass:"hljs-comment"},[s._v("// 没有错误抛出（在严格模式下会抛出，即使之前已经有相同的值）")]),s._v("\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(a.b); "),t("span",{staticClass:"hljs-comment"},[s._v("// 打印 123， 赋值不起作用。")]),s._v("\n")])])]),t("p"),s._v(" "),t("ul",[t("li",[t("code",[s._v("enumerable")])])]),s._v(" "),t("pre",[t("code",{staticClass:"lang-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" a = {};\n"),t("span",{staticClass:"hljs-built_in"},[s._v("Object")]),s._v(".defineProperty(a, "),t("span",{staticClass:"hljs-string"},[s._v("'b'")]),s._v(",{\n  "),t("span",{staticClass:"hljs-attr"},[s._v("value")]),s._v(": "),t("span",{staticClass:"hljs-number"},[s._v("123")]),s._v(",\n  "),t("span",{staticClass:"hljs-attr"},[s._v("enumerable")]),s._v(": "),t("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v("\n})\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-built_in"},[s._v("Object")]),s._v(".keys(a)); "),t("span",{staticClass:"hljs-comment"},[s._v("// 打印[]")]),s._v("\n")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("set")]),s._v("和"),t("code",[s._v("get")])])]),s._v(" "),t("p",[s._v("不能同时设置访问器"),t("code",[s._v("get set")]),s._v("和 "),t("code",[s._v("wriable")]),s._v(" 或 "),t("code",[s._v("value")]),s._v("，否则会错。就是说想用 "),t("code",[s._v("get")]),s._v(" 和"),t("code",[s._v("set")]),s._v("，就不能用 "),t("code",[s._v("writable")]),s._v(" 或 "),t("code",[s._v("value")]),s._v(" 中的任何一个。")]),s._v(" "),t("pre",[t("code",{staticClass:"lang-javascript"},[s._v("Observer.prototype.setVaule = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("key, val")]),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-built_in"},[s._v("Object")]),s._v(".defineProperty("),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".data, key, {\n    "),t("span",{staticClass:"hljs-attr"},[s._v("enumerable")]),s._v(": "),t("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(",\n    "),t("span",{staticClass:"hljs-attr"},[s._v("configurable")]),s._v(": "),t("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(",\n    "),t("span",{staticClass:"hljs-attr"},[s._v("get")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n      "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v("'你访问了'")]),s._v(" + key);\n      "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" val;\n    },\n    "),t("span",{staticClass:"hljs-attr"},[s._v("set")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("newVal")]),s._v(") ")]),s._v("{\n      "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v("'你设置了'")]),s._v(" + key);\n      "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v("'新的'")]),s._v(" + key + "),t("span",{staticClass:"hljs-string"},[s._v("' = '")]),s._v(" + newVal);\n      val = newVal;\n    }\n  });\n};\n")])])])}]},tOlv:function(s,a,t){s.exports=t("8BV5")}});
//# sourceMappingURL=9.3f940f953b90177390d5.js.map