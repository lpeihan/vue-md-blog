{"version":3,"sources":["webpack:///static/js/8.b9893845bbe3fdf87a6f.js","webpack:///./articles/event-loop.md","webpack:///./articles/event-loop.md?2823","webpack:///./articles/event-loop.md?3194"],"names":["webpackJsonp","CTiU","module","exports","__webpack_require__","G8Dk","__webpack_exports__","d","render","staticRenderFns","_vm","this","_h","$createElement","_self","_c","_m","_v","attrs","start","src","alt","staticClass","href","MvKN","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__node_modules_vue_loader_14_2_2_vue_loader_lib_template_compiler_index_id_data_v_4464b968_hasScoped_false_optionsId_1_buble_transforms_node_modules_vue_loader_14_2_2_vue_loader_lib_selector_type_template_index_0_node_modules_vue_markdown_loader_2_4_1_vue_markdown_loader_lib_markdown_compiler_js_raw_event_loop_md__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_14_2_2_vue_loader_lib_runtime_component_normalizer__","Component"],"mappings":"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","file":"static/js/8.b9893845bbe3fdf87a6f.js","sourcesContent":["webpackJsonp([8],{\n\n/***/ \"CTiU\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(\"MvKN\");\n\n/***/ }),\n\n/***/ \"G8Dk\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return render; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return staticRenderFns; });\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('p',[_vm._v(\"{\"),_c('br'),_vm._v(\"  “title”: “单线程和事件循环”,\"),_c('br'),_vm._v(\"  “date”: “2018-04-28”,\"),_c('br'),_vm._v(\"  “tags”: “javascript”\"),_c('br'),_vm._v(\"}\")]),_vm._v(\" \"),_c('ol',[_c('li',[_c('p',[_vm._v(\"单线程\")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"单线程的\"),_c('code',[_vm._v(\"JS\")]),_vm._v(\"引擎\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"所谓单线程，是指在\"),_c('code',[_vm._v(\"JS\")]),_vm._v(\"引擎中负责解释和执行\"),_c('code',[_vm._v(\"JavaScript\")]),_vm._v(\"代码的线程只有一个，称之主线程。\")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"多线程的浏览器\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"但是实际浏览器上还存在其他的线程。例如：界面渲染线程,处理\"),_c('code',[_vm._v(\"AJAX\")]),_vm._v(\"请求的线程、处理\"),_c('code',[_vm._v(\"DOM\")]),_vm._v(\"事件的线程、定时器线程、读写文件的线程等等。\")]),_vm._v(\" \"),_c('ul',[_c('li',[_c('p',[_c('code',[_vm._v(\"js引擎线程\")]),_vm._v(\"和\"),_c('code',[_vm._v(\"界面渲染引擎\")]),_vm._v(\"互斥\")]),_vm._v(\" \"),_c('p',[_c('code',[_vm._v(\"界面渲染引擎\")]),_vm._v(\"负责渲染浏览器\"),_c('code',[_vm._v(\"html\")]),_vm._v(\"元素，当界面需要重绘\"),_c('code',[_vm._v(\"Repaint\")]),_vm._v(\"或由于某种操作引发回流\"),_c('code',[_vm._v(\"reflow\")]),_vm._v(\"时,该线程就会执行。在脚本中对界面进行更新操作，如添加结点、删除结点或改变结点的外观等更新并不会立即体现出来，这些操作将保存在一个队列中，待\"),_c('code',[_vm._v(\"JavaScript\")]),_vm._v(\"引擎空闲时才有机会渲染出来.\")])])])])]),_vm._v(\" \"),_c('ol',{attrs:{\"start\":\"2\"}},[_c('li',[_c('p',[_vm._v(\"可视化描述\")]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":\"http://note.youdao.com/yws/api/personal/file/391F49F1EB8040D194BD6B0F3DFE5969?method=download&shareKey=cdf29e565ce8891507a246658f8a5196\",\"alt\":\"stack\"}})])])]),_vm._v(\" \"),_c('ol',{attrs:{\"start\":\"3\"}},[_c('li',[_c('p',[_vm._v(\"栈\"),_c('code',[_vm._v(\"stack\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"函数调用形成了一个栈帧。\")]),_vm._v(\" \"),_c('pre',[_c('code',{staticClass:\"lang-javascript\"},[_c('span',{staticClass:\"hljs-function\"},[_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"function\")]),_vm._v(\" \"),_c('span',{staticClass:\"hljs-title\"},[_vm._v(\"foo\")]),_vm._v(\"(\"),_c('span',{staticClass:\"hljs-params\"},[_vm._v(\"b\")]),_vm._v(\") \")]),_vm._v(\"{\\n  \"),_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"var\")]),_vm._v(\" a = \"),_c('span',{staticClass:\"hljs-number\"},[_vm._v(\"10\")]),_vm._v(\";\\n  \"),_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"return\")]),_vm._v(\" a + b + \"),_c('span',{staticClass:\"hljs-number\"},[_vm._v(\"11\")]),_vm._v(\";\\n}\\n\"),_c('p',[_c('span',{staticClass:\"hljs-function\"},[_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"function\")]),_vm._v(\" \"),_c('span',{staticClass:\"hljs-title\"},[_vm._v(\"bar\")]),_vm._v(\"(\"),_c('span',{staticClass:\"hljs-params\"},[_vm._v(\"x\")]),_vm._v(\") \")]),_vm._v(\"{\\n\"),_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"var\")]),_vm._v(\" y = \"),_c('span',{staticClass:\"hljs-number\"},[_vm._v(\"3\")]),_vm._v(\";\\n\"),_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"return\")]),_vm._v(\" foo(x * y);\\n}\")]),_vm._v(\"\\n\"),_c('p',[_c('span',{staticClass:\"hljs-built_in\"},[_vm._v(\"console\")]),_vm._v(\".log(bar(\"),_c('span',{staticClass:\"hljs-number\"},[_vm._v(\"7\")]),_vm._v(\"));\\n\")])])]),_c('p'),_vm._v(\" \"),_c('p',[_vm._v(\"当调用\"),_c('code',[_vm._v(\"bar\")]),_vm._v(\"时，创建了第一个帧 ，帧中包含了\"),_c('code',[_vm._v(\"bar\")]),_vm._v(\"的参数和局部变量。当\"),_c('code',[_vm._v(\"bar\")]),_vm._v(\"调用\"),_c('code',[_vm._v(\"foo\")]),_vm._v(\"时，第二个帧就被创建，并被压到第一个帧之上，帧中包含\"),_c('code',[_vm._v(\"foo\")]),_vm._v(\"的参数和局部变量。当\"),_c('code',[_vm._v(\"foo\")]),_vm._v(\"返回时，最上层的帧就被弹出栈。当 \"),_c('code',[_vm._v(\"bar\")]),_vm._v(\"返回的时候，栈就空了。\")])])]),_vm._v(\" \"),_c('ol',{attrs:{\"start\":\"4\"}},[_c('li',[_c('p',[_vm._v(\"堆\"),_c('code',[_vm._v(\"heap\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"对象被分配在一个堆中，一个用以表示一个内存中大的未被组织的区域。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"当我们需要访问引用类型（如对象，数组，函数等）的值时，首先从栈中获得该对象的地址指针，然后再从堆内存中取得所需的数据。\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"消息队列\"),_c('code',[_vm._v(\"message queue\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"当事件触发时，比如鼠标点击，\"),_c('code',[_vm._v(\"ajax\")]),_vm._v(\"执行完成，\"),_c('code',[_vm._v(\"setTimeout\")]),_vm._v(\"时间到了，表示异步任务完成，会将事件监听器函数封装成一条消息放到消息队列中，等待主线程执行。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"一个\"),_c('code',[_vm._v(\"JavaScript\")]),_vm._v(\"运行时包含了一个待处理的消息队列。每一个消息都与一个回调函数相关联。当栈为空时，从队列中取出一个消息进行处理。\")])])]),_vm._v(\" \"),_c('ol',{attrs:{\"start\":\"6\"}},[_c('li',[_c('p',[_vm._v(\"事件循环\"),_c('code',[_vm._v(\"event loop\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"为什么有个事件呢？\")]),_vm._v(\" \"),_c('pre',[_c('code',[_vm._v(\"因为消息队列中的每条消息实际上都对应着一个事件。\\n\")])]),_c('p',[_vm._v(\"主线程只会做一件事情，就是从消息队列里面取消息、执行消息，再取消息、再执行。当消息队列为空时，就会等待直到消息队列变成非空。\")]),_vm._v(\" \"),_c('pre',[_c('code',{staticClass:\"lang-javascript\"},[_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"while\")]),_vm._v(\"(\"),_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"true\")]),_vm._v(\") {\\n  var \"),_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"message\")]),_vm._v(\" = queue.get();\\n  execute(\"),_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"message\")]),_vm._v(\");\\n}\\n\")])]),_vm._v(\" \"),_c('p',[_vm._v(\" 每次\"),_c('code',[_vm._v(\"event loop\")]),_vm._v(\"查看消息队列，找到最老的消息，压入栈，执行之，执行完了，就进行一次视图渲染。周而复始，直到所有消息队列都执行完毕。\")]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":\"http://note.youdao.com/yws/api/personal/file/B4284E1E3142411F982C8E813E3B544A?method=download&shareKey=cdf29e565ce8891507a246658f8a5196\",\"alt\":\"event-loop\"}})]),_vm._v(\" \"),_c('p',[_vm._v(\" （\"),_c('code',[_vm._v(\"Event Loop\")]),_vm._v(\"是 \"),_c('code',[_vm._v(\"JavaScript\")]),_vm._v(\" 的运行环境（比如浏览器）提供的机制）\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"添加消息\")]),_vm._v(\" \"),_c('p',[_vm._v(\"在浏览器里，当一个事件出现且有一个事件监听器被绑定时，消息会被随时添加。如果没有事件监听器，事件会丢失。所以点击一个附带点击事件处理函数的元素会添加一个消息。其它事件亦然。\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"生产者和消费者\")]),_vm._v(\" \"),_c('p',[_vm._v(\"从生产者与消费者的角度看，异步过程是这样的：\")]),_vm._v(\" \"),_c('p',[_vm._v(\"工作线程是生产者，主线程是消费者(只有一个消费者)。工作线程执行异步任务，执行完成后把对应的回调函数封装成一条消息放到消息队列中；主线程不断地从消息队列中取消息并执行，当消息队列空时主线程阻塞，直到消息队列再次非空。\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"参考\")]),_vm._v(\" \"),_c('p',[_c('a',{attrs:{\"href\":\"https://segmentfault.com/a/1190000004322358\"}},[_vm._v(\"https://segmentfault.com/a/1190000004322358\")])]),_vm._v(\" \"),_c('p',[_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop\"}},[_vm._v(\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop\")])])])])])}]\n\n\n/***/ }),\n\n/***/ \"MvKN\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__node_modules_vue_loader_14_2_2_vue_loader_lib_template_compiler_index_id_data_v_4464b968_hasScoped_false_optionsId_1_buble_transforms_node_modules_vue_loader_14_2_2_vue_loader_lib_selector_type_template_index_0_node_modules_vue_markdown_loader_2_4_1_vue_markdown_loader_lib_markdown_compiler_js_raw_event_loop_md__ = __webpack_require__(\"G8Dk\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_14_2_2_vue_loader_lib_runtime_component_normalizer__ = __webpack_require__(\"18Nq\");\n/* script */\nvar __vue_script__ = null\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\n\nvar Component = Object(__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_14_2_2_vue_loader_lib_runtime_component_normalizer__[\"a\" /* default */])(\n  __vue_script__,\n  __WEBPACK_IMPORTED_MODULE_0__node_modules_vue_loader_14_2_2_vue_loader_lib_template_compiler_index_id_data_v_4464b968_hasScoped_false_optionsId_1_buble_transforms_node_modules_vue_loader_14_2_2_vue_loader_lib_selector_type_template_index_0_node_modules_vue_markdown_loader_2_4_1_vue_markdown_loader_lib_markdown_compiler_js_raw_event_loop_md__[\"a\" /* render */],\n  __WEBPACK_IMPORTED_MODULE_0__node_modules_vue_loader_14_2_2_vue_loader_lib_template_compiler_index_id_data_v_4464b968_hasScoped_false_optionsId_1_buble_transforms_node_modules_vue_loader_14_2_2_vue_loader_lib_selector_type_template_index_0_node_modules_vue_markdown_loader_2_4_1_vue_markdown_loader_lib_markdown_compiler_js_raw_event_loop_md__[\"b\" /* staticRenderFns */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/8.b9893845bbe3fdf87a6f.js","module.exports = require(\"!!vue-loader!../node_modules/_vue-markdown-loader@2.4.1@vue-markdown-loader/lib/markdown-compiler.js?raw!./event-loop.md\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./articles/event-loop.md\n// module id = CTiU\n// module chunks = 8","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('p',[_vm._v(\"{\"),_c('br'),_vm._v(\"  “title”: “单线程和事件循环”,\"),_c('br'),_vm._v(\"  “date”: “2018-04-28”,\"),_c('br'),_vm._v(\"  “tags”: “javascript”\"),_c('br'),_vm._v(\"}\")]),_vm._v(\" \"),_c('ol',[_c('li',[_c('p',[_vm._v(\"单线程\")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"单线程的\"),_c('code',[_vm._v(\"JS\")]),_vm._v(\"引擎\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"所谓单线程，是指在\"),_c('code',[_vm._v(\"JS\")]),_vm._v(\"引擎中负责解释和执行\"),_c('code',[_vm._v(\"JavaScript\")]),_vm._v(\"代码的线程只有一个，称之主线程。\")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"多线程的浏览器\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"但是实际浏览器上还存在其他的线程。例如：界面渲染线程,处理\"),_c('code',[_vm._v(\"AJAX\")]),_vm._v(\"请求的线程、处理\"),_c('code',[_vm._v(\"DOM\")]),_vm._v(\"事件的线程、定时器线程、读写文件的线程等等。\")]),_vm._v(\" \"),_c('ul',[_c('li',[_c('p',[_c('code',[_vm._v(\"js引擎线程\")]),_vm._v(\"和\"),_c('code',[_vm._v(\"界面渲染引擎\")]),_vm._v(\"互斥\")]),_vm._v(\" \"),_c('p',[_c('code',[_vm._v(\"界面渲染引擎\")]),_vm._v(\"负责渲染浏览器\"),_c('code',[_vm._v(\"html\")]),_vm._v(\"元素，当界面需要重绘\"),_c('code',[_vm._v(\"Repaint\")]),_vm._v(\"或由于某种操作引发回流\"),_c('code',[_vm._v(\"reflow\")]),_vm._v(\"时,该线程就会执行。在脚本中对界面进行更新操作，如添加结点、删除结点或改变结点的外观等更新并不会立即体现出来，这些操作将保存在一个队列中，待\"),_c('code',[_vm._v(\"JavaScript\")]),_vm._v(\"引擎空闲时才有机会渲染出来.\")])])])])]),_vm._v(\" \"),_c('ol',{attrs:{\"start\":\"2\"}},[_c('li',[_c('p',[_vm._v(\"可视化描述\")]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":\"http://note.youdao.com/yws/api/personal/file/391F49F1EB8040D194BD6B0F3DFE5969?method=download&shareKey=cdf29e565ce8891507a246658f8a5196\",\"alt\":\"stack\"}})])])]),_vm._v(\" \"),_c('ol',{attrs:{\"start\":\"3\"}},[_c('li',[_c('p',[_vm._v(\"栈\"),_c('code',[_vm._v(\"stack\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"函数调用形成了一个栈帧。\")]),_vm._v(\" \"),_c('pre',[_c('code',{staticClass:\"lang-javascript\"},[_c('span',{staticClass:\"hljs-function\"},[_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"function\")]),_vm._v(\" \"),_c('span',{staticClass:\"hljs-title\"},[_vm._v(\"foo\")]),_vm._v(\"(\"),_c('span',{staticClass:\"hljs-params\"},[_vm._v(\"b\")]),_vm._v(\") \")]),_vm._v(\"{\\n  \"),_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"var\")]),_vm._v(\" a = \"),_c('span',{staticClass:\"hljs-number\"},[_vm._v(\"10\")]),_vm._v(\";\\n  \"),_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"return\")]),_vm._v(\" a + b + \"),_c('span',{staticClass:\"hljs-number\"},[_vm._v(\"11\")]),_vm._v(\";\\n}\\n\"),_c('p',[_c('span',{staticClass:\"hljs-function\"},[_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"function\")]),_vm._v(\" \"),_c('span',{staticClass:\"hljs-title\"},[_vm._v(\"bar\")]),_vm._v(\"(\"),_c('span',{staticClass:\"hljs-params\"},[_vm._v(\"x\")]),_vm._v(\") \")]),_vm._v(\"{\\n\"),_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"var\")]),_vm._v(\" y = \"),_c('span',{staticClass:\"hljs-number\"},[_vm._v(\"3\")]),_vm._v(\";\\n\"),_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"return\")]),_vm._v(\" foo(x * y);\\n}\")]),_vm._v(\"\\n\"),_c('p',[_c('span',{staticClass:\"hljs-built_in\"},[_vm._v(\"console\")]),_vm._v(\".log(bar(\"),_c('span',{staticClass:\"hljs-number\"},[_vm._v(\"7\")]),_vm._v(\"));\\n\")])])]),_c('p'),_vm._v(\" \"),_c('p',[_vm._v(\"当调用\"),_c('code',[_vm._v(\"bar\")]),_vm._v(\"时，创建了第一个帧 ，帧中包含了\"),_c('code',[_vm._v(\"bar\")]),_vm._v(\"的参数和局部变量。当\"),_c('code',[_vm._v(\"bar\")]),_vm._v(\"调用\"),_c('code',[_vm._v(\"foo\")]),_vm._v(\"时，第二个帧就被创建，并被压到第一个帧之上，帧中包含\"),_c('code',[_vm._v(\"foo\")]),_vm._v(\"的参数和局部变量。当\"),_c('code',[_vm._v(\"foo\")]),_vm._v(\"返回时，最上层的帧就被弹出栈。当 \"),_c('code',[_vm._v(\"bar\")]),_vm._v(\"返回的时候，栈就空了。\")])])]),_vm._v(\" \"),_c('ol',{attrs:{\"start\":\"4\"}},[_c('li',[_c('p',[_vm._v(\"堆\"),_c('code',[_vm._v(\"heap\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"对象被分配在一个堆中，一个用以表示一个内存中大的未被组织的区域。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"当我们需要访问引用类型（如对象，数组，函数等）的值时，首先从栈中获得该对象的地址指针，然后再从堆内存中取得所需的数据。\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"消息队列\"),_c('code',[_vm._v(\"message queue\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"当事件触发时，比如鼠标点击，\"),_c('code',[_vm._v(\"ajax\")]),_vm._v(\"执行完成，\"),_c('code',[_vm._v(\"setTimeout\")]),_vm._v(\"时间到了，表示异步任务完成，会将事件监听器函数封装成一条消息放到消息队列中，等待主线程执行。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"一个\"),_c('code',[_vm._v(\"JavaScript\")]),_vm._v(\"运行时包含了一个待处理的消息队列。每一个消息都与一个回调函数相关联。当栈为空时，从队列中取出一个消息进行处理。\")])])]),_vm._v(\" \"),_c('ol',{attrs:{\"start\":\"6\"}},[_c('li',[_c('p',[_vm._v(\"事件循环\"),_c('code',[_vm._v(\"event loop\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"为什么有个事件呢？\")]),_vm._v(\" \"),_c('pre',[_c('code',[_vm._v(\"因为消息队列中的每条消息实际上都对应着一个事件。\\n\")])]),_c('p',[_vm._v(\"主线程只会做一件事情，就是从消息队列里面取消息、执行消息，再取消息、再执行。当消息队列为空时，就会等待直到消息队列变成非空。\")]),_vm._v(\" \"),_c('pre',[_c('code',{staticClass:\"lang-javascript\"},[_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"while\")]),_vm._v(\"(\"),_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"true\")]),_vm._v(\") {\\n  var \"),_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"message\")]),_vm._v(\" = queue.get();\\n  execute(\"),_c('span',{staticClass:\"hljs-keyword\"},[_vm._v(\"message\")]),_vm._v(\");\\n}\\n\")])]),_vm._v(\" \"),_c('p',[_vm._v(\" 每次\"),_c('code',[_vm._v(\"event loop\")]),_vm._v(\"查看消息队列，找到最老的消息，压入栈，执行之，执行完了，就进行一次视图渲染。周而复始，直到所有消息队列都执行完毕。\")]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":\"http://note.youdao.com/yws/api/personal/file/B4284E1E3142411F982C8E813E3B544A?method=download&shareKey=cdf29e565ce8891507a246658f8a5196\",\"alt\":\"event-loop\"}})]),_vm._v(\" \"),_c('p',[_vm._v(\" （\"),_c('code',[_vm._v(\"Event Loop\")]),_vm._v(\"是 \"),_c('code',[_vm._v(\"JavaScript\")]),_vm._v(\" 的运行环境（比如浏览器）提供的机制）\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"添加消息\")]),_vm._v(\" \"),_c('p',[_vm._v(\"在浏览器里，当一个事件出现且有一个事件监听器被绑定时，消息会被随时添加。如果没有事件监听器，事件会丢失。所以点击一个附带点击事件处理函数的元素会添加一个消息。其它事件亦然。\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"生产者和消费者\")]),_vm._v(\" \"),_c('p',[_vm._v(\"从生产者与消费者的角度看，异步过程是这样的：\")]),_vm._v(\" \"),_c('p',[_vm._v(\"工作线程是生产者，主线程是消费者(只有一个消费者)。工作线程执行异步任务，执行完成后把对应的回调函数封装成一条消息放到消息队列中；主线程不断地从消息队列中取消息并执行，当消息队列空时主线程阻塞，直到消息队列再次非空。\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"参考\")]),_vm._v(\" \"),_c('p',[_c('a',{attrs:{\"href\":\"https://segmentfault.com/a/1190000004322358\"}},[_vm._v(\"https://segmentfault.com/a/1190000004322358\")])]),_vm._v(\" \"),_c('p',[_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop\"}},[_vm._v(\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop\")])])])])])}]\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-4464b968\",\"hasScoped\":false,\"optionsId\":\"1\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./node_modules/_vue-markdown-loader@2.4.1@vue-markdown-loader/lib/markdown-compiler.js?raw!./articles/event-loop.md\n// module id = G8Dk\n// module chunks = 8","/* script */\nvar __vue_script__ = null\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4464b968\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"1\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=template&index=0!../node_modules/_vue-markdown-loader@2.4.1@vue-markdown-loader/lib/markdown-compiler.js?raw!./event-loop.md\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.2@vue-loader!./node_modules/_vue-markdown-loader@2.4.1@vue-markdown-loader/lib/markdown-compiler.js?raw!./articles/event-loop.md\n// module id = MvKN\n// module chunks = 8"],"sourceRoot":""}