webpackJsonp([3],{"5JRF":function(s,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("MDfO"),_=t("18Nq"),v=Object(_.a)(null,n.a,n.b,!1,null,null,null);a.default=v.exports},LAwx:function(s,a,t){s.exports=t("5JRF")},MDfO:function(s,a,t){"use strict";t.d(a,"a",function(){return n}),t.d(a,"b",function(){return _});var n=function(){var s=this,a=s.$createElement;s._self._c;return s._m(0)},_=[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("p",[s._v("{"),t("br"),s._v("  “title”: “原型和原型链详解”,"),t("br"),s._v("  “date”: “2018-02-22”,"),t("br"),s._v("  “tags”: “javascript”"),t("br"),s._v("}")]),s._v(" "),t("h2",{attrs:{id:"-"}},[s._v("私有变量和函数")]),s._v(" "),t("p",[s._v("在函数内部定义的变量和函数，如果不对外提供接口，外部是无法访问到的，也就是该函数的"),t("code",[s._v("私有变量")]),s._v("和"),t("code",[s._v("私有函数")]),s._v("。")]),s._v(" "),t("pre",[t("code",{staticClass:"lang-javascript"},[t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("Person")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" name = "),t("span",{staticClass:"hljs-number"},[s._v("18")]),s._v(";\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" say = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v("'hello world'")]),s._v(");\n  }\n}\n"),t("p",[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" person = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Person();\nperson.name; "),t("span",{staticClass:"hljs-comment"},[s._v("// undefined")]),s._v("\nperson.say; "),t("span",{staticClass:"hljs-comment"},[s._v("// undefined")]),s._v("\n")])])]),t("p"),s._v(" "),t("h2",{attrs:{id:"-"}},[s._v("静态变量和函数")]),s._v(" "),t("p",[s._v("当定义一个函数后通过点号 "),t("code",[s._v("'.'")]),s._v("为其添加的属性和函数，通过对象本身仍然可以访问得到，但是其实例却访问不到，这样的变量和函数分别被称为"),t("code",[s._v("静态变量")]),s._v("和"),t("code",[s._v("静态函数")]),s._v("。")]),s._v(" "),t("pre",[t("code",{staticClass:"lang-javascript"},[t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("Person")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{};\n"),t("p",[s._v("Person.age = "),t("span",{staticClass:"hljs-number"},[s._v("18")]),s._v(";\nPerson.say = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[t("code",{pre:!0},[s._v("hello world")])]),s._v(");\n}")]),s._v("\n"),t("p",[s._v("Person.age; "),t("span",{staticClass:"hljs-comment"},[s._v("// 18")]),s._v("\n"),t("span",{staticClass:"hljs-keyword"},[s._v("typeof")]),s._v(" Person.say; "),t("span",{staticClass:"hljs-comment"},[s._v("// function")])]),s._v("\n"),t("p",[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" person = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Person();\nperson.age; "),t("span",{staticClass:"hljs-comment"},[s._v("// undefined")]),s._v("\nperson.say; "),t("span",{staticClass:"hljs-comment"},[s._v("// undefined")])]),s._v("\n"),t("p")])]),t("p"),s._v(" "),t("h2",{attrs:{id:"-"}},[s._v("实例变量和函数")]),s._v(" "),t("p",[s._v("实例可以访问的变量和函数")]),s._v(" "),t("pre",[t("code",{staticClass:"lang-javascript"},[t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("Person")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".name = "),t("span",{staticClass:"hljs-string"},[s._v("'John'")]),s._v(";\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".walk = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v("'walking'")]),s._v(");\n  };\n}\n"),t("p",[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" p1 = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Person();\np1.name; "),t("span",{staticClass:"hljs-comment"},[s._v("// 'John'")]),s._v("\np1.walk(); "),t("span",{staticClass:"hljs-comment"},[s._v("// 'walking'")])]),s._v("\n"),t("p",[t("span",{staticClass:"hljs-comment"},[s._v("// 接下来")]),s._v("\n"),t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" p2 = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Person();\np1.walk === p2.walk; "),t("span",{staticClass:"hljs-comment"},[s._v("// false")]),s._v("\n")])])]),t("p"),s._v(" "),t("p",[s._v("上面的"),t("code",[s._v("p1.walk === p2.walk; // false")]),s._v("可以看出，"),t("code",[s._v("p1")]),s._v("和"),t("code",[s._v("p2")]),s._v("的"),t("code",[s._v("walk")]),s._v("函数名相同,，做完全一样的功能，却不是同一个引用。")]),s._v(" "),t("p",[s._v("如果一个函数有千万个实例，那么每个实例的方法就要保持一千万份的复制，这显然太浪费资源了。")]),s._v(" "),t("p",[t("code",[s._v("prototype")]),s._v("应运而生。")]),s._v(" "),t("h2",{attrs:{id:"-"}},[s._v("基本概念")]),s._v(" "),t("p",[s._v("每个构造函数（对象）都有一个"),t("code",[s._v("prototype")]),s._v("属性，这是一个指针，指向一个对象，这个对象的用途是包含可以由特定类型的所有实例共享的属性和方法。")]),s._v(" "),t("p",[s._v("每个构造函数都有一个内部属性"),t("code",[s._v("prototype")]),s._v("属性，我们称之为"),t("code",[s._v("原型")]),s._v(" 。")]),s._v(" "),t("p",[s._v("实例不具备"),t("code",[s._v("prototype")]),s._v("属性，而是用"),t("code",[s._v("__proto__")]),s._v("指向原型。")]),s._v(" "),t("p",[s._v("下面是原型对象的结构：")]),s._v(" "),t("pre",[t("code",{staticClass:"lang-javascript"},[s._v("Person.prototype = {\n  "),t("span",{staticClass:"hljs-string"},[s._v("constructor :")]),s._v(" Function, "),t("span",{staticClass:"hljs-comment"},[s._v("// 构造函数")]),s._v("\n  "),t("span",{staticClass:"hljs-string"},[s._v("__proto__ :")]),s._v(" parent prototype, "),t("span",{staticClass:"hljs-comment"},[s._v("// 指向上一层的原型对象")]),s._v("\n  some prototype "),t("span",{staticClass:"hljs-string"},[s._v("properties:")]),s._v(" ... "),t("span",{staticClass:"hljs-comment"},[s._v("// 共享的对象和方法")]),s._v("\n};\n")])]),s._v(" "),t("p",[s._v("接下来看个原型实例：")]),s._v(" "),t("pre",[t("code",{staticClass:"lang-javascript"},[t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("Person")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("name")]),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".name = name;\n}\n"),t("p",[s._v("Person.prototype.say = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[t("code",{pre:!0},[s._v('hello <span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span>')])]),s._v(");\n}")]),s._v("\n"),t("p",[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" p = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Person("),t("span",{staticClass:"hljs-string"},[s._v("'John'")]),s._v(");")]),s._v("\n"),t("p",[s._v("p.say(); "),t("span",{staticClass:"hljs-comment"},[s._v("// 'hello John'")]),s._v("\n")])])]),t("p"),s._v(" "),t("p",[s._v("当我们调用"),t("code",[s._v("p.say()")]),s._v("方法时，由于"),t("code",[s._v("Person")]),s._v("中没有这个方法，所以，它就会去"),t("code",[s._v("__proto__")]),s._v("中找，也就是"),t("code",[s._v("Person.prototype")]),s._v("。")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("prototype")]),s._v("和"),t("code",[s._v("__proto__")]),s._v("的关系：")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://note.youdao.com/yws/api/personal/file/D8B6646E2F1F4650988AD6F867D5F39D?method=download&shareKey=4f83ebac192d6d74f5f3fb719caeb535",alt:"prototype"}})])])]),s._v(" "),t("p",[s._v("实例一旦创造出来，就具有"),t("code",[s._v("contructor")]),s._v("（指向构造函数）和"),t("code",[s._v("__proto__")]),s._v("（指向原型对象）。")]),s._v(" "),t("p",[s._v("构造函数中也有一个"),t("code",[s._v("prototype")]),s._v("属性，是一个指针，指向它的原型对象。")]),s._v(" "),t("p",[s._v("如上图，我们可以得出下面的关系：")]),s._v(" "),t("pre",[t("code",{staticClass:"lang-javascript"},[t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("Person")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".name = "),t("span",{staticClass:"hljs-string"},[s._v("'John'")]),s._v(";\n}\n"),t("p",[s._v("Person.prototype.say = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v("'hello world'")]),s._v(");\n}\n"),t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" p1 = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Person();\n"),t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" p2 = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Person();")]),s._v("\n"),t("p",[s._v("Person.prototyp.say === p1.say === p2.say; "),t("span",{staticClass:"hljs-comment"},[s._v("// true")]),s._v("\nPerson.prototype === p1."),t("strong",[s._v("proto")]),s._v(" === p2."),t("strong",[s._v("proto")]),s._v("; "),t("span",{staticClass:"hljs-comment"},[s._v("// true")]),s._v("\nPerson.prototype.constructor === p1.constructor ==== p2.constructor === Person; "),t("span",{staticClass:"hljs-comment"},[s._v("// true")]),s._v("\n")])])]),t("p"),s._v(" "),t("p",[s._v("事实上，"),t("code",[s._v("new")]),s._v("就做了三件事：")]),s._v(" "),t("pre",[t("code",{staticClass:"lang-javascript"},[s._v("var obj  = {}"),t("span",{staticClass:"hljs-comment"},[s._v(";  ")]),s._v("\nobj.__proto__ = Base.prototype"),t("span",{staticClass:"hljs-comment"},[s._v(";  ")]),s._v("\nBase.call(obj)"),t("span",{staticClass:"hljs-comment"},[s._v(";")]),s._v("\n")])]),s._v(" "),t("h2",{attrs:{id:"-"}},[s._v("原型链")]),s._v(" "),t("p",[s._v("当从一个对象那里调取属性或方法时，如果该对象自身不存在这样的属性或方法，就会自己指向的的"),t("code",[s._v("prototype")]),s._v("原型对象寻找，如果没有，就会去"),t("code",[s._v("prototype")]),s._v("关联的上层"),t("code",[s._v("prototype")]),s._v("寻找，如果再没有则继续查找，依次类推，直到为"),t("code",[s._v("prototype")]),s._v("为"),t("code",[s._v("null")]),s._v("从而形成了所谓的原型链。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("原型继承")]),s._v(" "),t("p",[s._v("在原型链的末端，就是"),t("code",[s._v("Object")]),s._v("构造函数"),t("code",[s._v("prototype")]),s._v("属性指向的那个原型对象。它是所有对象的祖先，实现了诸如"),t("code",[s._v("toString")]),s._v("的对象天生就有的方法。")]),s._v(" "),t("p",[t("code",[s._v("ECMAScript")]),s._v("中，实现继承的方法就是依靠原型链实现的。")])])]),s._v(" "),t("pre",[t("code",{staticClass:"lang-javascript"},[t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("Father")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".name = "),t("span",{staticClass:"hljs-string"},[s._v("'John'")]),s._v(";\n"),t("p",[t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".walk = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v("'walking'")]),s._v(");\n}\n}")]),s._v("\n"),t("p",[s._v("Father.prototype.say = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v("'I'm Father'")]),s._v(");\n}")]),s._v("\n"),t("p",[t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("Son")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n"),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".age = "),t("span",{staticClass:"hljs-number"},[s._v("18")]),s._v(";\n}")]),s._v("\n"),t("p",[s._v("Son.prototype = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Father();")]),s._v("\n"),t("p",[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" s1 = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Son();\n"),t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" s2 = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Son();")]),s._v("\n"),t("p",[s._v("s1.name; "),t("span",{staticClass:"hljs-comment"},[s._v("// 'John'")]),s._v("\ns1.say(); "),t("span",{staticClass:"hljs-comment"},[s._v("// 'I'm Father'")]),s._v("\ns1.walk(); "),t("span",{staticClass:"hljs-comment"},[s._v("// 'walkding'")])]),s._v("\n"),t("p",[s._v("s1.walk === s2.walk; "),t("span",{staticClass:"hljs-comment"},[s._v("// true")]),s._v("\n")])])]),t("p"),s._v(" "),t("p",[t("code",[s._v("Father")]),s._v("的实例属性也就变成"),t("code",[s._v("Son")]),s._v("原型的属性，而"),t("code",[s._v("Son.prototype.__proto__ === Father.prototype")]),s._v(" 。")]),s._v(" "),t("h2",{attrs:{id:"-"}},[s._v("参考")]),s._v(" "),t("ol",[t("li",[t("a",{attrs:{href:"https://segmentfault.com/a/1190000000662547#articleHeader6"}},[s._v("https://segmentfault.com/a/1190000000662547#articleHeader6")])]),s._v(" "),t("li",[t("a",{attrs:{href:"http://www.jianshu.com/p/aa1ebfdad661"}},[s._v("http://www.jianshu.com/p/aa1ebfdad661")])])])])}]}});
//# sourceMappingURL=3.1304837d8e07d43ca0a6.js.map